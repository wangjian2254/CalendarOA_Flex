<?xml version="1.0"?>
<!--
  Created by wangjian2254 on 14-8-8.
-->
<s:ItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009" xmlns:s="library://ns.adobe.com/flex/spark"
                autoDrawBackground="true"
        >
    <fx:Metadata>
        [Event(name="listItemClick",type="events.ListClickEvent")]
        [Event(name="listItemZhanKai",type="events.ListClickEvent")]
    </fx:Metadata>
    <fx:Script><![CDATA[
        import events.ListClickEvent;

        import mx.controls.Alert;

        private var _data:Object;
        override public function get data():Object {
            return _data;
        }

        override public function set data(value:Object):void {
            _data = value;
            super.data = value;
            if(value==null){
                return;
            }

            head.source = data.icon;
            orgLabel.text = data.name;

            headPerson.source = data.person_icon;
            nameLabel.text = data.person_name;


        }

        private function select_handler(e:MouseEvent):void{
            if(data && !data.person_active){
                Alert.show("您在 "+data.name +" 已经离职。","提示");
                return;
            }
                var listclickevent:ListClickEvent=new ListClickEvent("listItemClick",data);
                dispatchEvent(listclickevent);

        }



        protected function getColor():uint
        {
            if(itemIndex%2==1){
                return 0xf5f6f6;
            }

            return 0xffffff;
        }

        protected function m_over():void{
            solidColor.color = 0x7ae7bf;
        }

        protected function m_out():void{
            solidColor.color = getColor();
        }
        ]]></fx:Script>
    <fx:Declarations>
    </fx:Declarations>

    <s:BorderContainer width="100%" height="50" click="select_handler(event)" buttonMode="true" borderVisible="false" mouseOut="m_out()" mouseOver="m_over()">


        <s:Rect id="backgroundRect" left="0" right="0" top="0" bottom="0">
            <s:fill>
                <s:SolidColor color="0xdbdbdb" />
            </s:fill>
        </s:Rect>
        <s:Rect left="1" right="1" top="0" bottom="1">
            <s:fill>
                <s:SolidColor id="solidColor" color="{getColor()}"  />
            </s:fill>
        </s:Rect>
        <s:HGroup id="horizontalLayout" verticalAlign="middle" height="100%" gap="5" paddingRight="10" paddingLeft="10">
            <s:Image id="head" width="45" height="45"></s:Image>
            <s:Label text="组织名称：" ></s:Label>
            <s:Label id="orgLabel"   paddingRight="40"></s:Label>

            <s:Image id="headPerson" width="45" height="45"></s:Image>
            <s:Label text="昵称：" ></s:Label>
            <s:Label id="nameLabel"  ></s:Label>
        </s:HGroup>

    </s:BorderContainer>
</s:ItemRenderer>
