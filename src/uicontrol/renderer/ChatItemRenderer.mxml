<?xml version="1.0"?>
<!--
  Created by wangjian2254 on 14-8-8.
-->
<s:ItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009" xmlns:s="library://ns.adobe.com/flex/spark"
                autoDrawBackground="true"
        >
    <fx:Metadata>
        [Event(name="listItemClick",type="events.ListClickEvent")]
        [Event(name="listItemZhanKai",type="events.ListClickEvent")]
    </fx:Metadata>
    <fx:Script><![CDATA[
        import events.ListClickEvent;

        import util.ToolUtil;



        private var _data:Object;
        override public function get data():Object {
            return _data;
        }

        override public function set data(value:Object):void {
            _data = value;
            super.data = value;
            if(value==null){
                return;
            }
            var person:Object = ToolUtil.getPersonById(data.from);
            if(person.id==ToolUtil.sessionUser.pid){
                head2.source = person.icon;
                nameLabel2.text = person.name;
                head.source = null;
                nameLabel.text = "";
                horizontalLayout.horizontalAlign="right";
                heaGroup.horizontalAlign = "right";
            }else{
                 head.source = person.icon;
                head2.source = null;
                nameLabel.text = person.name;
                nameLabel2.text = "";
                horizontalLayout.horizontalAlign="left";
                heaGroup.horizontalAlign="left";
            }
            contentLabel.text = data.text;
            contentLabel.setStyle("fontFamily","simsun,MINGLIU");
            contentLabel.setStyle("alignmentBaseline","ideographicCenter");
            contentLabel.setStyle("color",data.color);
            contentLabel.setStyle("fontWeight",data.weight);
            contentLabel.setStyle("fontStyle",data.style);
            contentLabel.setStyle("textDecoration",data.dec);
            contentLabel.setStyle("fontSize",data.size);
            dateLabel.text = data.date;

            contentLabel.validateNow();


        }

        private function select_handler(e:MouseEvent):void{
            var listclickevent:ListClickEvent=new ListClickEvent("listItemClick",data);
            dispatchEvent(listclickevent);

        }

        protected function m_over():void{
            solidColor.color = 0x7ae7bf;
        }

        protected function m_out():void{
            solidColor.color = 0xffffff;
        }
        ]]></fx:Script>

    <s:BorderContainer id="borderContainer" width="100%" minHeight="50" click="select_handler(event)" borderVisible="false" mouseOut="m_out()" mouseOver="m_over()">


        <s:Rect id="backgroundRect" left="0" right="0" top="0" bottom="0">
            <s:fill>
                <s:SolidColor color="0xdbdbdb" />
            </s:fill>
        </s:Rect>
        <s:Rect left="1" right="1" top="0" bottom="1">
            <s:fill>
                <s:SolidColor id="solidColor" color="0xffffff"  />
            </s:fill>
        </s:Rect>
        <s:VGroup  verticalAlign="top" horizontalAlign="center" width="100%" gap="10">
            <s:HGroup id="heaGroup" verticalAlign="middle" height="35" width="100%">
                <s:Image id="head" width="30" height="30"></s:Image>
                <s:Label id="nameLabel" color="#cccccc"></s:Label>
                <s:Label id="dateLabel" color="#cccccc"></s:Label>
                <s:Label id="nameLabel2" color="#cccccc"></s:Label>
                <s:Image id="head2" width="30" height="30"></s:Image>
            </s:HGroup>
            <s:HGroup id="horizontalLayout" verticalAlign="top" width="100%" paddingRight="40" paddingLeft="40">
                <s:Label id="contentLabel" maxDisplayedLines="-1" maxWidth="{borderContainer.width*0.8}" paddingTop="1"  ></s:Label>
            </s:HGroup>

        </s:VGroup>

    </s:BorderContainer>
</s:ItemRenderer>
