<?xml version="1.0"?>
<!--
  Created by wangjian2254 on 14-7-30.
-->
<s:BorderContainer xmlns:fx="http://ns.adobe.com/mxml/2009" xmlns:s="library://ns.adobe.com/flex/spark"
                   xmlns:uicontrol="uicontrol.*"
                   width="100" height="18" borderVisible="false" borderColor="#000000" cornerRadius="7"
                   creationComplete="init()"
        >
    <fx:Script><![CDATA[
        import httpcontrol.HttpServiceUtil;

        import mx.rpc.events.ResultEvent;

        import util.ToolUtil;

        private var _person:Object = null;
        private var _department:Object = null;

        [Bindable]
        public var showBtn:Boolean = false;

        private function init():void {
            try{
                personName.text = _person.name;
                if (showBtn) {
                    this.width = personName.width + btnDel.width;
                }
                this.width = personName.width;
            }catch (e:Error){

            }

        }


        public function get person():Object {
            return _person;
        }

        public function set person(value:Object):void {
            _person = value;
            init();
        }
        private function delPerson():void {
            var obj:Object = new Object();

            obj['id'] = department.id;
            obj['pid'] = person.id;
            HttpServiceUtil.getCHTTPServiceAndResult("/riliusers/delPersonDepartment", addChildDepartmentResult, "POST").send(obj);
        }

        private function addChildDepartmentResult(result:Object, e:ResultEvent):void {
            if (result.success) {
                ToolUtil.departMentListRefresh();
            }

        }

        public function get department():Object {
            return _department;
        }

        public function set department(value:Object):void {
            _department = value;
        }
        ]]></fx:Script>
    <s:layout>
        <s:HorizontalLayout gap="5" verticalAlign="middle"  horizontalAlign="left" paddingRight="10" paddingLeft="10">

        </s:HorizontalLayout>
    </s:layout>
    <s:Label id="personName" ></s:Label>
    <uicontrol:BtnDel id="btnDel" visible="{showBtn}" clickFun="delPerson"></uicontrol:BtnDel>
</s:BorderContainer>
