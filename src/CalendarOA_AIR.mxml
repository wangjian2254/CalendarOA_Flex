<?xml version="1.0" encoding="utf-8"?>
<s:WindowedApplication xmlns:fx="http://ns.adobe.com/mxml/2009" 
					   xmlns:s="library://ns.adobe.com/flex/spark" 
					   xmlns:mx="library://ns.adobe.com/flex/mx"
					   creationComplete="init()"    minWidth="955" minHeight="600" skinClass="skins.WindowApplicationSkinBlue" 
					   xmlns:uicontrol="uicontrol.*" xmlns:httpcontrol="httpcontrol.*"
					   showStatusBar="false"
					    viewSourceURL="srcview/index.html">
	<fx:Style source="/assets/customrControls.css">
		
	</fx:Style>
	
	
	<fx:Script source="calendar.as">
		
	</fx:Script>
	<fx:Script source="menu.as">
		
	</fx:Script>
	<fx:Script source="air.as">
	
	</fx:Script>
	<fx:Declarations>
		<httpcontrol:CHTTPService id="menuXML" url="/ca/menu.xml" method="GET" resultFormat="xml" result="setMenu(event)" fault="failMenu(event)"/>
		
	</fx:Declarations>
	<fx:Style source="/assets/style.css"/>
	<s:Group id="header" width="100%" height="109">
		<s:layout>
			<s:BasicLayout/>
		</s:layout>
		<s:Image source="assets/logo.png" x="25" y="5" height="43"/>
		
		
		<s:Group top="12" right="15" visible="false" id="userinfoGroup">
			<s:layout>
				<s:HorizontalLayout gap="20" verticalAlign="middle"/>
			</s:layout>	
			<mx:LinkButton icon="{CBorderContainer.refreshimg}" label="{ToolUtil.unreadMessageNum}" click="openMessage()" styleName="textStyle2" textDecoration="underline" />
			<s:HGroup gap="0">
				<s:Label text="用户:" styleName="textStyle2"/>	
				<s:Label text="{ToolUtil.sessionUser.nickname}" styleName="textStyle2"/>	
				<s:Label text=" | " styleName="textStyle2"/>	
				<s:Label text=" 用户名:" styleName="textStyle2"/>	
				<s:Label text="{ToolUtil.sessionUser.username}" styleName="textStyle2"/>
			</s:HGroup>	
				
			<s:SkinnableContainer  id="loginBtnPanel"  height="26"  skinClass="skins.topLinksBoxSkin" visible="true">
				<s:layout>
					<s:HorizontalLayout gap="0" verticalAlign="middle"/>
				</s:layout>
				
				
				<mx:LinkButton x="0" y="2" height="25" label="修改密码" styleName="textStyle1" click="repassword()"/>
				<s:Label text="|" styleName="textStyle1"/>
				<mx:LinkButton x="0" y="2" height="25" label="修改个人信息" styleName="textStyle1" click="updateinfo()"/>
				<s:Label text="|" styleName="textStyle1" />
				<mx:LinkButton x="0" y="2" height="25" label="最小化"  styleName="textStyle1" visible="true" click="this.minimize()" />
				<s:Label text="|" styleName="textStyle1" />
				
				<mx:LinkButton x="0" y="2" height="25" label="最大化" id="resizeBtn1"  styleName="textStyle1"  click="this.maxResize()" />
				<s:Label text="|" styleName="textStyle1"  />
				<mx:LinkButton x="0" y="2" height="25" label="关闭程序"  styleName="textStyle1" visible="true" click="logout()" />
				
			</s:SkinnableContainer>
			
		</s:Group>
		<s:Group top="12" right="15" visible="true" id="userinfoGroup2">
			<s:layout>
				<s:HorizontalLayout gap="20" verticalAlign="middle"/>
			</s:layout>	
			<s:SkinnableContainer  id="loginBtnPanel2" height="26"  skinClass="skins.topLinksBoxSkin" visible="true">
				<s:layout>
					<s:HorizontalLayout gap="0" verticalAlign="middle"/>
				</s:layout>
				
				<mx:LinkButton x="0" y="2" height="25" label="登录"  styleName="textStyle1" click="login()"/>
				<s:Label text="|" styleName="textStyle1"/>
				<mx:LinkButton x="0" y="2" height="25" label="注册" styleName="textStyle1" click="reg()"/>
				<s:Label text="|" styleName="textStyle1" />
				<mx:LinkButton x="0" y="2" height="25" label="最小化"  styleName="textStyle1" visible="true" click="this.minimize()" />
				<s:Label text="|" styleName="textStyle1" />
				
				<mx:LinkButton x="0" y="2" height="25" label="最大化"  id="resizeBtn2"  styleName="textStyle1"  click="this.maxResize()" />
				<s:Label text="|" styleName="textStyle1"  />
				<mx:LinkButton x="0" y="2" height="25" label="关闭程序"  styleName="textStyle1" visible="true" click="logout()" />
			</s:SkinnableContainer>
			
		</s:Group>
		
		<s:Group left="20" right="0" top="48" id="menuContainer" height="29" >
			<s:layout>
				<s:HorizontalLayout gap="-1" verticalAlign="middle"/>
			</s:layout>	
			<!--<s:Button width="130" height="29" label="基础管理" styleName="menuBtn" mouseOver="showHandler(event)"/>
			<s:Button width="130" height="29" label="项目视图" styleName="menuBtn" mouseOver="showHandler(event)"/>
			<s:Button width="130" height="29" label="我的自检" styleName="menuBtn" mouseOver="showHandler(event)"/>
			<s:Button width="130" height="29" label="请假申请" styleName="menuBtn" mouseOver="showHandler(event)"/>-->
		</s:Group>	
		
		<s:SkinnableContainer  height="28" top="77" left="0" right="0" skinClass="skins.locGroupSkin" id="locGroup" visible="true">
			<s:layout>
				<s:BasicLayout/>
			</s:layout>
			<s:Label text="当前位置： " left="20" top="8" styleName="textStyle3"/>
			<s:Label id="website" left="85" top="8" styleName="textStyle3"/>
			<s:Label id="msg" text="{ToolUtil.resultMsg}" color="red" top="0" bottom="0" left="0" right="0" textAlign="center" verticalAlign="middle" />
			<mx:LinkButton label="刷新页面数据" visible="true" click="reLogin()" top="3" right="12" color="0x353535"/>
		</s:SkinnableContainer>		
	</s:Group>
	
	<mx:ViewStack id="gongNengStack" top="105" left="0" right="0" bottom="33"  borderVisible="false" creationComplete="trace('view stack')"  >
		
		
		
	</mx:ViewStack>
	
	<uicontrol:CTabBar id="cbar" dataProvider="{gongNengStack}" left="2" right="2" width="100%" bottom="1" height="31" borderVisible="false"  creationComplete="trace('tabbar')">
		
	</uicontrol:CTabBar>
</s:WindowedApplication>
